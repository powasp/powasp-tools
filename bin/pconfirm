#!/bin/bash

# Asks to confirm if a user wants to do something
# Usage: pconfirm -v [message]


# Variables
DEFAULTMESSAGE="Are you sure?"
SELECTMESSAGE="[y/n]"
ANSWER=""
VERBOSE=""

# Check if verbose (Sets $VERBOSE to the "-v" if the flag is present, or "?" if not)
getopts v VERBOSE

# Shifts the option index to after the flags
shift $(($OPTIND-1))

# Set message if available
if [[ -z "$1" ]]; then
	MESSAGE="$DEFAULTMESSAGE"
else
	MESSAGE="$1"
fi

#Ask to confirm
read -r -p "$MESSAGE $SELECTMESSAGE " ANSWER

# Check their response
case "$ANSWER" in
	[Yy])
		# Return true
		exit 0
		;;
	*)
		# Return false
		# If verbose, tell the user
		pflag "$VERBOSE" && echo "Operation cancelled"
		exit 1
		;;
esac
